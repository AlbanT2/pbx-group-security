{{ define "content" }}

<div id="content">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        {{ .Content }}
        {{ $challenges := where $.Site.Pages "Section" "challenges" }}

        <!-- this adds to Scratch a mapping of all usages of challenges -->
        {{ range where $challenges ".Params.challenges" "!=" nil }}
        {{ range .Params.challenges }}
        {{ with $.Site.GetPage "page" . }}
        {{ $.Scratch.Add .Params.key 1 }}
        {{ end }}
        {{ end }}

        {{ end}}

        {{ $challenges := where $.Site.Pages "Section" "challenges" }}
        {{ $byArea     := $challenges.GroupByParam "area" }}
        {{ $len        := len $byArea }}
        <div>
          {{ range $i, $elemment := $byArea }}
          {{ if modBool $i 3 }}
        </div>
        <div class="row">
          {{ end }}
          <div class="col-xs-4">
            <div class="challenge-area">

              <div class="title">
                {{ .Key }}
                <span class="size hidden-print">
                  x{{ len .Pages }}
                  <span>
                  </div>

                  <table class="table">
                    <thead>
                      <th>Title</th>
                      <!--<th class="text-center">Used</th>-->
                      <th class="text-center">Difficulty</th>
                      <th class="text-center">key</th>
                    </thead>
                    {{ range .Pages }}
                    <tr>

                      <td>{{ .Params.Title }}</td>
                      <!-- <td class="text-center difficulty" >{{ $.Scratch.Get .Params.Key }} </td> -->
                      <td class="text-center difficulty">
                        <span class="difficulty-{{ .Params.difficulty }}">
                          {{ .Params.difficulty }}
                        </span>
                      </td>
                      <td class="text-center key">

                        <span class="size hidden-print">
                          <a href="{{ .Permalink}}">{{ .Params.Key }}</a>
                        </span>
                        <span class="size visible-print">
                          {{ .Params.Key }}
                        </span>
                      </td>
                    </tr>
                    {{ end }}
                  </table>
                </div>
              </div>

              {{ end }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div><!-- container -->
</div><!-- content -->

{{ end }}
